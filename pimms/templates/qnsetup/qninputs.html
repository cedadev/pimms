{% extends "site/two_column_page_wideleft.html" %} {% load qnsetup_tags %}

{% block extrahead %}
<link rel="stylesheet" href="{{ STATIC_URL }}css/jquery.fileupload-ui.css">
<link rel="stylesheet" href="{{ STATIC_URL }}css/bootstrap-image-gallery.min.css">

{% endblock %}

{% block pagetitle %}
  Metadata questionnaire setup
{% endblock %}

{% block page_top_menu %}
{% endblock %}


{% block page_column_one %}
    <!-- <form id="uploadform" method="post" action="" enctype="multipart/form-data"> -->
    <form method="post" action="" enctype="multipart/form-data">
        
        <h3> Qn Params </h3>
        <div class="row">
              <div class="span2">
                <label for="abbrev"{% if qnsetupform.abbrev.errors %} class="text-error" {% endif %}>Abbreviation {% if qnsetupform.fields.abbrev.required %}*{% endif %}</label>
              </div>
              <div class="span3">
                {{ qnsetupform.abbrev }}
              </div>
              <div class="span2">
              {% if qnsetupform.abbrev.errors %}
                {% for error in qnsetupform.abbrev.errors %}
                    <p class="text-error">{{ error }}</p>
                {% endfor %}
              {% endif %}
              </div>
        </div>
        <br/>
        
        <div class="row">
          <div class="span2">
            <label for="project"{% if qnsetupform.project.errors %} class="text-error" {% endif %}>Project {% if qnsetupform.fields.project.required %}*{% endif %}</label>
          </div>
          <div class="span3">
            {{ qnsetupform.project }}
          </div>
          <div class="span2">
            {% if qnsetupform.project.errors %}
              {% for error in qnsetupform.project.errors %}
                <p class="text-error">{{ error }}</p>
              {% endfor %}
            {% endif %}
          </div>
        </div>
        <br/>
        
        <div class="row">
          <div class="span2">
            <label for="project"{% if qnsetupform.description.errors %} class="text-error" {% endif %}>Description {% if qnsetupform.fields.description.required %}*{% endif %}</label>
          </div>
          <div class="span3">
            {{ qnsetupform.description }}
          </div>
          <div class="span2">
            {% if qnsetupform.description.errors %}
              {% for error in qnsetupform.description.errors %}
                <p class="text-error">{{ error }}</p>
              {% endfor %}
            {% endif %}
          </div>
        </div>
        <br/>
        
        <h3> Upload CVs </h3>
        <table id="cvuploadform" border="0" cellpadding="0" cellspacing="0">
          <tbody>
            {% for cvform in cvformset.forms %}
	            <tr>
	              <td>{{ cvform.title }}</td>
	              <td>{{ cvform.cvfile }}</td>
	            </tr>
            {% endfor %}
          </tbody>
        </table>
        
        <h3> Upload Experiments </h3>
        <table id="expuploadform" border="0" cellpadding="0" cellspacing="0">
          <tbody>
            {% for expform in expformset.forms %}
                <tr>
                  <td>{{ expform.title }}</td>
                  <td>{{ expform.expfile }}</td>
                </tr>
            {% endfor %}
          </tbody>
        </table>
        <p>
            {{ cvformset.management_form }}
            {{ expformset.management_form }}
            <input type="submit" value="Submit" />
        </p>
        
    </form>    
      
{% endblock %}


{% block page_column_two %}    
{% endblock %}

{% block extrajs %}
    <script src="{{ STATIC_URL }}js/jquery.formset.js"></script>
    
    <script type="text/javascript">
           $(function() {
               $('#cvuploadform tbody tr').formset();
           })
    </script>
    <script type="text/javascript">
           $(function() {
               $('#expuploadform tbody tr').formset();
           })
    </script>
{% endblock %}

