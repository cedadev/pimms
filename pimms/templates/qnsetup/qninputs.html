{% extends "site/two_column_page_wideleft.html" %} {% load qnsetup_tags %}

{% block extrahead %}
<link rel="stylesheet" href="{{ STATIC_URL }}css/jquery.fileupload-ui.css">
<link rel="stylesheet" href="{{ STATIC_URL }}css/bootstrap-image-gallery.min.css">
{% endblock %}

{% block pagetitle %}
  Metadata questionnaire setup
{% endblock %}

{% block page_top_menu %}
    
    {% if qnsetupform.errors%} 
      <div class="row">
        <div class="offset1 span10">
            <div class="alert alert-error ">
              {% if qnsetupform.non_field_errors %}
                <p>{{ qnsetupform.non_field_errors }}</p>
              {% else %}
                <p> Please correct the marked fields</p>
              {% endif %}
            </div>
        </div>
      </div>
    {% endif %}
  
{% endblock %}


{% block page_column_one %}

      <form action="{{ urls.qninputs }}" method="POST" class="form-horizontal">
        {% csrf_token %}
            
		    <div class="page-header">   
		        <h3>1. Project level information</h3>
		    </div>
            
            <div class="row">        
              <div class="span2">
                <label for="abbrev"{% if qnsetupform.abbrev.errors %} class="text-error" {% endif %}>Abbreviation {% if qnsetupform.fields.abbrev.required %}*{% endif %}</label>
              </div>
              <div class="span3">
                {{ qnsetupform.abbrev }}
              </div>
              <div class="span2">
              {% if qnsetupform.abbrev.errors %}
                {% for error in qnsetupform.abbrev.errors %}
                    <p class="text-error">{{ error }}</p>
                {% endfor %}
              {% endif %}
              </div>
            </div>
            <br/>
            
            <div class="row">
              <div class="span2">
                <label for="project"{% if qnsetupform.project.errors %} class="text-error" {% endif %}>Project {% if qnsetupform.fields.project.required %}*{% endif %}</label>
              </div>
              <div class="span3">
                {{ qnsetupform.project }}
              </div>
              <div class="span2">
                {% if qnsetupform.project.errors %}
                  {% for error in qnsetupform.project.errors %}
                    <p class="text-error">{{ error }}</p>
                  {% endfor %}
                {% endif %}
              </div>
            </div>
            <br/>
            
            <div class="row">
              <div class="span2">
                <label for="project"{% if qnsetupform.description.errors %} class="text-error" {% endif %}>Description {% if qnsetupform.fields.description.required %}*{% endif %}</label>
              </div>
              <div class="span3">
                {{ qnsetupform.description }}
              </div>
              <div class="span2">
                {% if qnsetupform.description.errors %}
                  {% for error in qnsetupform.description.errors %}
                    <p class="text-error">{{ error }}</p>
                  {% endfor %}
                {% endif %}
              </div>
            </div>
            <br/>
            
            <div class="page-header">   
              <h3>2. Upload CV files</h3>
            </div>
            
            
            <div class="container">
              <form id="fileupload" method="POST" action="{{ urls.cvload }}" enctype="multipart/form-data">{% csrf_token %}
                <div class="row fileupload-buttonbar">
		            <div class="span7">
		                <span class="btn btn-primary fileinput-button">
		                    <i class="icon-plus icon-white"></i>
		                    <span>Add files...</span>
		                    <input type="file" name="file" multiple>
		                </span>
		                <button type="submit" class="btn btn-success start">
		                    <i class="icon-upload icon-white"></i>
		                    <span>Start upload</span>
		                </button>
		                <button type="reset" class="btn btn-warning cancel">
		                    <i class="icon-ban-circle icon-white"></i>
		                    <span>Cancel upload</span>
		                </button>
		                <button type="button" class="btn btn-danger delete">
		                    <i class="icon-trash icon-white"></i>
		                    <span>Delete files</span>
		                </button>
		                <input type="checkbox" class="toggle">
		            </div>
		            <div class="span5 fileupload-progress fade">
		                <div class="progress progress-success progres-striped active">
		                    <div class="bar" style="width:0%"></div>
		                </div>
		                <div class="progress-extended">&nbsp;</div>
		            </div>
                </div>
                <div class="fileupload-loading"></div>
                <table class="table table-striped"><tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery"></tbody></table>
              </form>
              <div class="fileupload-content">
                <table class="files"></table>
                <div class="fileupload-progressbar"></div>
              </div>
            </div>  
            
            
            <div class="page-header">   
              <h3>3. Questionnaire frontend settings</h3>
            </div>
            
            <div class="row">
              <div class="span2">
                <label for="idontknows"{% if qnsetupform.idontknows.errors %} class="text-error" {% endif %}>Allow 'I don't know'? {% if qnsetupform.fields.idontknows.required %}*{% endif %}</label>
              </div>
              <div class="span3">
                {{ qnsetupform.idontknows }}
              </div>
              <div class="span2">
                {% if qnsetupform.idontknows.errors %}
                  {% for error in qnsetupform.idontknows.errors %} 
                    <p class="text-error">{{ error }}</p>
                  {% endfor %} 
                {% endif %}
              </div>
            </div>
            <br/>
            
            <br/>   
      
{% endblock %} 


{% block page_column_two %}
  <div class="well well-large span3">
	  <div class="row">
	    <div class="span3">
	      <button type="submit" name="qnsave" class="btn btn-primary btn-block"><strong>Save current info</strong></button>
	      <button type="submit" name="qnsetupform" class="btn btn-success btn-block"><strong>Generate Questionnaire</strong></button>
	      <button name="cancel" type="submit" value="Cancel" class="btn btn-block"><strong>Cancel</strong></button>
        </div>
      </div>
  </div>
  
  </form>  
{% endblock %}

{% block extrajs %}
{% upload_js %}
<script src="{{ STATIC_URL }}js/jquery.ui.widget.js"></script>
<script src="{{ STATIC_URL }}js/tmpl.min.js"></script>
<script src="{{ STATIC_URL }}js/load-image.min.js"></script>
<script src="{{ STATIC_URL }}js/canvas-to-blob.min.js"></script>
<script src="{{ STATIC_URL }}js/bootstrap-image-gallery.min.js"></script>
<script src="{{ STATIC_URL }}js/jquery.iframe-transport.js"></script>
<script src="{{ STATIC_URL }}js/jquery.fileupload.js"></script>
<script src="{{ STATIC_URL }}js/jquery.fileupload-fp.js"></script>
<script src="{{ STATIC_URL }}js/jquery.fileupload-ui.js"></script>
<script src="{{ STATIC_URL }}js/locale.js"></script>
<script src="{{ STATIC_URL }}js/main.js"></script>
{% endblock %}

